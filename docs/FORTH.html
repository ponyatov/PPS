<title>FORTH/js</title>
<link rel="manifest" href="/FORTH.json">
<link rel="icon" type="image/png" href="triangle.png" />
<meta name="theme-color" content="black">

<link rel="stylesheet" href="FORTH.css">
<script src="PEG.js"></script>
<script src=FORTH.js></script>

<pre id=log># log</pre>

<pre id=stack># stack</pre>

<pre id=voc># vocabulary</pre>

<textarea id=meta oninput="update()">// PEG grammar

FORTH = ( ( comment
  / n:number { push(n) }
  / w:word   { push(w) }
) _ ) *

number
  = pfx:'0x' hex:[0-9a-fA-F]+    { return   parseInt(join(hex),0x10) }
  / pfx:'0b' bin:[01]+           { return   parseInt(join(bin),0x02) }
  / exp:([0-9]+[eE][+\-]?[0-9]+) { return parseFloat(join(exp)     ) }
  / flo:([0-9]+'.'[0-9]*)        { return parseFloat(join(flo)     ) }
  / int:([0-9]+)                 { return   parseInt(join(int)     ) }

word
  = name:[a-zA-Z0-9_.]+ { return join(name) } / [()*+\-]

comment = '#'[^\n]*

_ " drop spaces " = [ \t\r\n]*
</textarea>

<div id=cmd>
<textarea id=pad oninput="update()"># console
22 * (3 + 4)
1 2.3 4e-5 0xDeadBeef 0b1101
</textarea>
<button id=go onclick="go()">GO</button>
</div>
